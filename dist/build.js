(()=>{"use strict";var t={d:(o,e)=>{for(var s in e)t.o(e,s)&&!t.o(o,s)&&Object.defineProperty(o,s,{enumerable:!0,get:e[s]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o)};t.d({},{T:()=>i});const o=Vue.component("goods-list",{props:["goods"],template:'\n        <div class="goods-list">\n            <goods-item v-for="goodEntity in goods" :goodProp="goodEntity"></goods-item>\n        </div>\n    '}),e=Vue.component("goods-item",{props:["goodProp"],methods:{async addToCart(){const t=await fetch(`${i}/addToCart`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.goodProp)});if(t.ok){const o=await t.json();this.$parent.$parent.cartGoods=o,this.$parent.$parent.getCartProducts()}else alert("Произошла ошибка при соединении с сервером!")}},template:'\n        <div class="goods-item">\n            <h3>{{goodProp.product_name}}</h3>\n            <p>{{goodProp.price}}</p>\n            <button class="add-to-cart-button" @click="addToCart">Добавить в корзину</button>\n        </div>\n    '}),s=Vue.component("cart-list",{props:["isVisibleCart","cartGoods"],template:'\n        <div class="cart-list" v-if="isVisibleCart">\n            <cart-item v-for="goodEntity in cartGoods" :goodProp="goodEntity"></cart-item>\n        </div>\n    '}),a=Vue.component("cart-item",{props:["goodProp"],methods:{async removeFromCart(){const t=await fetch(`${i}/removeFromCart`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.goodProp)});if(t.ok){const o=await t.json();this.$parent.$parent.cartGoods=o,this.$parent.$parent.getCartProducts()}else alert("Произошла ошибка при соединении с сервером!")}},template:'\n    <div class="cart-item">\n        <h3>{{goodProp.product_name}}</h3>\n        <p>{{goodProp.price}}</p>\n        <button class="remove-from-cart-button" @click="removeFromCart">Удалить из корзины</button>\n    </div>\n    '}),r=Vue.component("goods-search",{props:["searchLine"],template:'\n        <input type="search" class="goods-search" v-bind:value="searchLine"\n        v-on:input="$emit(\'input\', $event.target.value)"/>\n    '}),i="http://localhost:3000";new Vue({el:"#app",components:{"goods-list":o,"goods-item":e,"cart-list":s,"cart-item":a,"goods-search":r},data:{goods:[],filteredGoods:[],cartGoods:[],searchLine:"",isVisibleCart:!1},methods:{async getProducts(){const t=await fetch(`${i}/catalogData`);if(t.ok){const o=await t.json();this.goods=o,this.filteredGoods=o}else alert("Произошла ошибка при соединении с сервером!")},async getCartProducts(){const t=await fetch(`${i}/cartData`);if(t.ok){const o=await t.json();this.cartGoods=o}else alert("Произошла ошибка при соединении с сервером!")},filterGoods(){const t=new RegExp(this.searchLine,"gi");this.filteredGoods=this.goods.filter((o=>t.test(o.product_name)))},showOrHideCart(){!1===this.isVisibleCart?this.isVisibleCart=!0:this.isVisibleCart=!1}},async mounted(){await this.getProducts(),await this.getCartProducts()}})})();